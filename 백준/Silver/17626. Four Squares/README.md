# [Silver III] Four Squares - 17626 

[문제 링크](https://www.acmicpc.net/problem/17626) 

### 성능 요약

메모리: 14444 KB, 시간: 128 ms

### 분류

다이나믹 프로그래밍, 브루트포스 알고리즘

### 제출 일자

2025년 7월 14일 14:32:38

### 문제 설명

<p>라그랑주는 1770년에 모든 자연수는 넷 혹은 그 이하의 제곱수의 합으로 표현할 수 있다고 증명하였다. 어떤 자연수는 복수의 방법으로 표현된다. 예를 들면, 26은 5<sup>2</sup>과 1<sup>2</sup>의 합이다; 또한 4<sup>2</sup> + 3<sup>2</sup> + 1<sup>2</sup>으로 표현할 수도 있다. 역사적으로 암산의 명수들에게 공통적으로 주어지는 문제가 바로 자연수를 넷 혹은 그 이하의 제곱수 합으로 나타내라는 것이었다. 1900년대 초반에 한 암산가가 15663 = 125<sup>2</sup> + 6<sup>2</sup> + 1<sup>2</sup> + 1<sup>2</sup>라는 해를 구하는데 8초가 걸렸다는 보고가 있다. 좀 더 어려운 문제에 대해서는 56초가 걸렸다: 11339 = 105<sup>2</sup> + 15<sup>2</sup> + 8<sup>2</sup> + 5<sup>2</sup>.</p>

<p>자연수 <em>n</em>이 주어질 때, <em>n</em>을 최소 개수의 제곱수 합으로 표현하는 컴퓨터 프로그램을 작성하시오.</p>

### 입력 

 <p>입력은 표준입력을 사용한다. 입력은 자연수 <em>n</em>을 포함하는 한 줄로 구성된다. 여기서, 1 ≤ <em>n</em> ≤ 50,000이다.</p>

### 출력 

 <p>출력은 표준출력을 사용한다. 합이 <em>n</em>과 같게 되는 제곱수들의 최소 개수를 한 줄에 출력한다.</p>

---

### 풀이
예를 들어,
- $N = 12$일 때: $12 = 4 + 4 + 4 \Rightarrow 3$개
- $N = 13$일 때: $13 = 4 + 9 \Rightarrow 2$개

#### 문제 이해

문제: 자연수 $N$을 **제곱수들의 합**으로 표현할 때, **필요한 항의 최소 개수**는?

**사용 가능한 제곱수들**: $1^2 = 1, 2^2 = 4, 3^2 = 9, 4^2 = 16, \ldots$

<br/>

문제의 구조는 다음과 같은 **점화식**으로 표현할 수 있기 때문에 **DP를 사용할 수 있습니다.**

> 어떤 수 $i$를 표현하는 가장 작은 방법은  
> $i - j^2$를 만드는 가장 작은 방법 + 1 (여기서 $j^2$는 i보다 작거나 같은 제곱수)

즉,

$$
dp[i] = \min_{j^2 \le i}(dp[i - j^2]) + 1
$$

→ 어떤 수를 제곱수들의 합으로 표현하는 문제는
**그보다 더 작은 수들의 결과를 이용해서** 구할 수 있습니다.
이런 구조는 **DP의 전형적인 특징**입니다.

$\Rightarrow$ 작은 문제의 해를 이용해서 큰 문제를 해결!

#### 좀 더 자세하게 설명하자면,
예시: N = 7일 때,  
7을 어떤 제곱수들의 합으로 표현해야 하니까 사용할 수 있는 제곱수는:
- 1 (1²)
- 4 (2²)

#### 1. 1²을 하나 쓴다고 생각해봅시다.

- 그럼 7 - 1 = 6 이죠?
- 즉, **7을 만들기 위해 1을 쓰고 나면 남은 6을 제곱수들의 합으로 표현해야 해요.**

그럼 "7을 표현하는 최소 방법"은  
-> "6을 표현하는 최소 방법 + 1" 이라고 생각할 수 있어요.

이걸 수식으로 쓰면 이렇게 됩니다:

$$
dp[7] = dp[6] + 1
$$

#### 2. 이번엔 4²을 쓴다고 생각해볼까요?

- 7 - 4 = 3
- 즉, "4 하나 쓰고 나머지 3을 제곱수 합으로 표현하면 됨"

그러면 또 이렇게 되죠:

$$
dp[7] = dp[3] + 1
$$

> dp[3] + 1에서 1은 숫자 1을 더한다는 의미가 아니라 1개의 항을 추가한다는 의미입니다.  
> 즉, 여기서는 7 - 2² = 3 이었기 때문에 (2²이라는 1개의 항 + dp[3](3이라는 숫자를 만들기 위한 항 개수))으로 표현했습니다.

#### 요약하면

7을 만들기 위한 방법은 이렇게 다양하게 나옵니다:

- 1² + [6을 만드는 최소 방법]
- 4² + [3을 만드는 최소 방법]

따라서, `7`을 표현하는 가장 좋은 방법은 아래 중 더 작은 값을 선택하면 돼요:

$$
dp[7] = \min(dp[6], dp[3]) + 1
$$

> 어떤 수 `i`를 표현하는 가장 작은 방법은  
> `i - j²` 를 표현하는 가장 작은 방법 + 1

다시 말하면, 어떤 제곱수 `j²`를 하나 쓰고, 나머지 숫자 `i - j²`를 **이미 계산해놓은 dp값을 이용해서 처리하자**는 뜻이에요.

#### DP가 가능한 이유

- 큰 수 `i`를 구하려면, 그보다 작은 수 `i - j²`들의 결과만 알면 됨
- 이미 구한 `dp[i - j²]`를 재활용하면 됨
- **중복 계산을 줄일 수 있음!**

####  정리

> "i - j² 를 만드는 가장 작은 방법 + 1"  
> 👉 어떤 제곱수 하나를 먼저 쓰고  
> 👉 남은 수는 **이미 구한 dp값**을 재활용해서 구하자  
> 👉 그러면 `dp[i]`를 빠르게 구할 수 있음!

#### 예시로 보기 (N = 7)

사용 가능한 제곱수: 1, 4

#### 각 i에 대해 dp[i]는?

- $dp[1] = 1$ → $1$
- $dp[2] = dp[1] + 1 = 2$ → $1 + 1$
- $dp[3] = dp[2] + 1 = 3$ → $1 + 1 + 1$
- $dp[4] = \min(dp[3], dp[0]) + 1 = \min(3, 0) + 1 = 1$ → $4$
- $dp[5] = \min(dp[4], dp[1]) + 1 = \min(1, 1) + 1 = 2$ → $4 + 1$
- $dp[6] = \min(dp[5], dp[2]) + 1 = \min(2, 2) + 1 = 3$ → $4 + 1 + 1$
- $dp[7] = \min(dp[6], dp[3]) + 1 = \min(3, 3) + 1 = 4$

#### 코드 동작 다시 보기

1. 각 숫자 $i$에 대해
2. $i$보다 작거나 같은 모든 제곱수 $j^2$를 시도
3. $i - j^2$을 만들 수 있는 가장 적은 개수 (dp\[i - j^2])에 +1
4. 그중 최소값을 dp\[i]에 저장

#### 요약

- 이 문제는 **큰 문제(N)를 작은 문제(i - j²)** 로 나눌 수 있습니다.
- **점화식 기반**으로 값을 계산하므로 **DP**를 사용할 수 있습니다.
- **dp[i] = 제곱수들의 합으로 i를 표현할 수 있는 최소 항의 개수**입니다.